# 中心像素GPS估计节点配置
# =====================================

# 节点标识和诊断
node_name: 'center_pixel_gps_estimator'
publish_diagnostics: true
diagnostics_period: 10.0

# 估计参数
estimation:
  frequency: 10.0  # Hz - GPS估计频率
  enable_continuous: true  # 是否持续估计

# 图像参数
image:
  width: 640
  height: 512

# 同步参数
sync:
  max_sync_time_diff: 0.1  # 最大同步时间差（秒）
  buffer_size: 20  # 传感器数据缓冲区大小

# 输出参数
output:
  jpeg_quality: 10  # JPEG压缩质量
  publish_local_enu: false  # 是否发布本地ENU坐标
  publish_camera_info: false  # 是否发布相机信息
  sigma_lat_lon_m: 5.0  # GPS估计不确定性（米）
  publish_center_marker: false  # 是否发布中心标记

# 相机参数
camera:
  mode: 'EO'  # 相机模式：'EO' 或 'IR'
  auto_scale_with_resolution: true  # 是否根据分辨率自动缩放内参
  digital_zoom_factor: 1.0  # 数字变焦倍数 (1.0=无变焦, 2.0=2倍变焦)

# 相机内参 - EO相机
camera_intrinsics:
  EO:
    fx: 515.1042901585477
    fy: 515.1042901585475
    cx: 320.0
    cy: 256.0
    distortion: [0.0, 0.0, 0.0, 0.0, 0.0]
    calibration_resolution: [640, 512]
  
  # 相机内参 - IR相机
  IR:
    fx: 2267.0
    fy: 1593.0
    cx: 640.0
    cy: 360.0
    distortion: [0.0, 0.0, 0.0, 0.0, 0.0]
    calibration_resolution: [1280, 720]

# GPS估计参数
gps_estimation:
  min_distance_threshold: 5.0  # 最小距离阈值（米）
  max_cluster_age_hours: 24.0  # 最大集群年龄（小时）
  cluster_buffer_size: 30  # 集群缓冲区大小

# 话题名称
topics:
  # 输入话题
  mavros_gps: '/dtc_mrsd/mavros/global_position/global'
  mavros_altitude: '/dtc_mrsd/mavros/global_position/rel_alt'
  mavros_heading: '/dtc_mrsd/mavros/global_position/compass_hdg'
  gimbal_attitude: '/gimbal_attitude'
  camera_mode: '/camera_mode'
  
  # 输出话题
  image_compressed: '/center_gps/image_compressed'
  camera_info: '/center_gps/camera_info'
  target_gps: '/center_gps/target_gps'
  target_gps_list: '/center_gps/target_gps_list'
  target_local_enu: '/center_gps/target_local_enu'
  center_marker: '/center_gps/center_marker'

# QoS设置
qos:
  # 传感器数据QoS
  sensor_data:
    reliability: 'best_effort'
    durability: 'volatile'
    depth: 1
  
  # 状态数据QoS
  state_data:
    reliability: 'reliable'
    durability: 'volatile'
    depth: 10
  
  # 目标数据QoS
  target_data:
    reliability: 'reliable'
    durability: 'volatile'
    depth: 5

# 性能监控
performance:
  enable_profiling: false
  profiling_report_interval: 300.0  # 秒
  log_performance_stats: true
  stats_log_interval: 30.0  # 秒

# 日志配置
logging:
  level: 'INFO'  # DEBUG, INFO, WARN, ERROR, CRITICAL
  log_to_file: false
  log_file_path: '/tmp/center_pixel_gps.log'

